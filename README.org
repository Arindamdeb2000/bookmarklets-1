
* TODO Bookmarklets

A bookmarklet is like a tiny Add-on for your browser. You drag it into
your bookmark-bar and when you click it, it does something.

[[file:install.gif]]

If you are using Firefox and a script-blocking Add-on (NoScript,
uMatrix, ...) you will notice that bookmarklets do not work if scripts
are disabled for the domain the website is on. This is a bug in
Firefox but there is an Add-on to work arround this issue:
[[https://addons.mozilla.org/en-US/firefox/addon/bookmarklets-context-menu/][Bookmarklets context menu]].

This Add-on requiers your bookmarklets to be HTML-URL-decodable. If
you are writing bookmarklets for your self, be aware that
copy-n-pasting your code into a new cookie does not fully URL-encode
your code. The =%=-sign for example stays unencoded and has to be
replaced manually by =%25=.

** Remove Sticky

Removes all sticky elements from the page.

*Bookmarklet:* [[javascript:(function()%257B%2520let%2520i%252C%2520elements%2520%253D%2520document.querySelectorAll('body%2520*')%253B%2520for%2520(i%2520%253D%25200%253B%2520i%2520%253C%2520elements.length%253B%2520i%252B%252B)%2520%257B%2520if(getComputedStyle(elements%255Bi%255D).position%2520%253D%253D%253D%2520'fixed'%2520%257C%257C%2520getComputedStyle(elements%255Bi%255D).position%2520%253D%253D%253D%2520'sticky')%257B%2520elements%255Bi%255D.parentNode.removeChild(elements%255Bi%255D)%253B%2520%257D%2520%257D%2520%257D)()][Remove sticky (drag me into the bookmark bar)]]

#+BEGIN_SRC javascript
javascript:(function(){
  let i, elements = document.querySelectorAll('body *');
  for (i = 0; i < elements.length; i++) {
    if(getComputedStyle(elements[i]).position === 'fixed'
       || getComputedStyle(elements[i]).position === 'sticky'){
      elements[i].parentNode.removeChild(elements[i]);
    }
  }
})()
#+END_SRC

** Scroll Better with the Space-Bar

When scrolling with the space-bar sticky headers can be annoying as
they cover up text that scrolles underneath them.

This bookmarklet removes sticky content and adds a red indicator-line
that shows, where the bottom of the page was, when you pressed space
to scroll.

[[file:space-scroll.gif]]

*Bookmarklet:* [[javascript:(function()%257B%2520let%2520i%252C%2520elements%253Ddocument.querySelectorAll('body%2520*')%253Bfor%2520(i%253D0%253Bi%2520%253C%2520elements.length%253Bi%252B%252B)%2520%257B%2520if%2520(getComputedStyle(elements%255Bi%255D).position%2520%253D%253D%253D%2520'fixed'%2520%257C%257C%2520getComputedStyle(elements%255Bi%255D).position%2520%253D%253D%253D%2520'sticky')%2520%257B%2520elements%255Bi%255D.parentNode.removeChild(elements%255Bi%255D)%253B%257D%257Dlet%2520elem%253DArray.from(document.getElementsByTagName(%2522body%2522))%255B0%255D.appendChild(document.createElement('div'))%253Belem.style.width%253D%2522100%2525%2522%253Belem.style.borderTop%253D%25221px%2520solid%2520red%2522%253Belem.style.position%253D%2522absolute%2522%253Belem.style.top%253D%25220px%2522%253Belem.style.opacity%253D%25220%2522%253Belem.style.transition%253D%2522opacity%25201000ms%2522%253Bwindow.addEventListener('keydown'%252C%2520e%2520%253D%253E%2520%257B%2520if(e.code%2520%253D%253D%253D%2520%2522Space%2522)%257B%2520elem.style.transition%253D%2522%2522%253Belem.style.top%253D(window.innerHeight%2520%252B%2520window.scrollY)%2520%252B%2520%2522px%2522%253Belem.style.opacity%253D%25221%2522%253BsetTimeout(function()%257B%2520elem.style.transition%253D%2522opacity%25201000ms%2522%253Belem.style.opacity%253D%25220%2522%253B%257D%252C%2520200)%253B%257D%257D)%253B%257D())][Space-scroll (drag me into the bookmark bar)]]

[[file:Remove%20sticky%20and%20add%20red%20scrolling-indicator.js][Source]]

** Youtube - Better Livestream-Chat in Cinema-mode

Arranges the video and the chat side by side. Currently only working
with screensizes arround 1920x1080.

[[file:yt-chat.gif]]

*Bookmarklet:* [[javascript:(function()%257B%2520let%2520video%253DArray.from(document.getElementsByClassName(%2522video-stream%2520html5-main-video%2522))%255B0%255D%253Blet%2520chat%253Ddocument.getElementById(%2522chat%2522)%253Bchat.style.position%253D'fixed'%253Bchat.style.top%253D'60px'%253Bchat.style.right%253D'5px'%253Bchat.style.height%253D'754.1px'%253Bvideo.style.left%253D'57.889px'%253B%257D)()][Better YT-Chat (drag me into the bookmark bar)]]

#+BEGIN_SRC javascript
javascript:(function(){
    let video = Array.from(document.getElementsByClassName("video-stream html5-main-video"))[0];
    let chat = document.getElementById("chat");
    chat.style.position = 'fixed';
    chat.style.top = '60px';
    chat.style.right = '5px';
    chat.style.height = '754.1px';
    video.style.left = '57.889px';
})()
#+END_SRC

** HTML5-Speed

Regulates the playback-speed of the video. Works on all HTML5-Videos
(e.g. Youtube).

*** Faster

*Bookmarklet:* [[javascript:(function()%257BArray.from(document.getElementsByTagName('video')).forEach(vid%2520%253D%253E%2520vid.playbackRate%2520*%253D%25201.25)%253B%257D())][+ (drag me into the bookmark bar)]]

#+BEGIN_SRC javascript
  javascript:(function(){
      Array.from(document.getElementsByTagName('video'))
          .forEach(vid => vid.playbackRate *= 1.25);
  }())
#+END_SRC

*** Slower

*Bookmarklet:* [[javascript:(function()%257BArray.from(document.getElementsByTagName('video')).forEach(vid%2520%253D%253E%2520vid.playbackRate%2520*%253D0.75)%253B%257D())][- (drag me into the bookmark bar)]]

#+BEGIN_SRC javascript
  javascript:(function(){
      Array.from(document.getElementsByTagName('video'))
          .forEach(vid => vid.playbackRate *= 0.75);
  }())
#+END_SRC

*** Reset

*Bookmarklet:* [[javascript:(function()%257BArray.from(document.getElementsByTagName('video')).forEach(vid%2520%253D%253E%2520vid.playbackRate%2520%253D0)%253B%257D())][0 (drag me into the bookmark bar)]]

#+BEGIN_SRC javascript
  javascript:(function(){
      Array.from(document.getElementsByTagName('video'))
          .forEach(vid => vid.playbackRate = 0);
  }())
#+END_SRC

** Speedread

After activating the bookmarklet one can select text on the page and
it will be displayed word by word (roughly). The bookmarklet uses the
"Optimal Recognition Point" for displaying the words at the right
position.

[[file:./speadread.gif]]

*Bookmarklet:* [[javascript:(function()%257B%2520wpm%253D250%253Blet%2520gtimeout%253D0%253Blet%2520inner%253Blet%2520outer%253Bdocument.addEventListener('selectionchange'%252C%2520()%2520%253D%253E%2520%257B%2520let%2520term%253Dwindow.getSelection().toString()%253Bstop()%253Bif(term.length%2520%253C%252010)%257B%2520return%253B%257D%2520if(!outer)%257B%2520outer%253DArray.from(document.getElementsByTagName('body'))%255B0%255D.appendChild(document.createElement('div'))%253Binner%253Douter.appendChild(document.createElement('div'))%253Bouter.style.position%253D'fixed'%253Bouter.style.top%253D'calc(50%252525%2520-%252050px)'%253Bouter.style.margin%253D'auto'%253Bouter.style.height%253D'100px'%253Bouter.style.minWidth%253D'800px'%253Bouter.style.background%253D'%2523f5f5f5'%253Bouter.style.left%253D'calc(50%252525%2520-%2520400px)'%253Bouter.style.fontSize%253D'70px'%253Bouter.style.textAlign%253D'center'%253Bouter.style.lineHeight%253D'100px'%253Bouter.style.flexDirection%253D'row'%253Bouter.style.justifyContent%253D'center'%253Bouter.style.alignItems%253D'center'%253Bouter.style.display%253D'flex'%253Bouter.style.borderTop%253D'3px%2520solid'%253Bouter.style.borderBottom%253D'3px%2520solid'%253Bouter.style.opacity%253D'0.97'%253Blet%2520temp%253Douter.appendChild(document.createElement('div'))%253Btemp.style.width%253D'3px'%253Btemp.style.background%253D'black'%253Btemp.style.height%253D'7px'%253Btemp.style.position%253D'absolute'%253Btemp.style.top%253D'0px'%253Btemp.style.left%253D'50%252525'%253Btemp%253Douter.appendChild(document.createElement('div'))%253Btemp.style.width%253D'3px'%253Btemp.style.background%253D'black'%253Btemp.style.height%253D'7px'%253Btemp.style.position%253D'absolute'%253Btemp.style.bottom%253D'0px'%253Btemp.style.left%253D'50%252525'%253Blet%2520temp1%253Douter.appendChild(document.createElement('div'))%253Btemp1.style.position%253D'absolute'%253Btemp1.style.left%253D'10px'%253Btemp1.style.flexDirection%253D'row'%253Btemp1.style.display%253D'flex'%253Btemp1.style.alignItems%253D'center'%253Btemp1.style.top%253D'5px'%253Btemp%253Dtemp1.appendChild(document.createElement('button'))%253Btemp.style.background%253D'%2523eee'%253Btemp.style.color%253D'black'%253Btemp.style.border%253D'none'%253Btemp.style.fontSize%253D'10px'%253Btemp.innerHTML%253D'-'%253Btemp.addEventListener('click'%252C%2520()%2520%253D%253E%2520%257B%2520wpm%2520-%253D%252010%253BwpmCounter.innerHTML%253Dwpm%2520%257D)%253Blet%2520wpmCounter%253Dtemp1.appendChild(document.createElement('div'))%253BwpmCounter.style.fontSize%253D'10px'%253BwpmCounter.style.lineHeight%253D'10px'%253BwpmCounter.style.height%253D'10px'%253BwpmCounter.style.margin%253D'10px'%253BwpmCounter.innerHTML%253Dwpm%253Btemp%253Dtemp1.appendChild(document.createElement('button'))%253Btemp.style.background%253D'%2523eee'%253Btemp.style.color%253D'black'%253Btemp.style.border%253D'none'%253Btemp.style.fontSize%253D'10px'%253Btemp.innerHTML%253D'%252B'%253Btemp.addEventListener('click'%252C%2520()%2520%253D%253E%2520%257B%2520wpm%2520%252B%253D%252010%253BwpmCounter.innerHTML%253Dwpm%2520%257D)%253Binner.style.display%253D'inline-block'%253Binner.style.transform%253D'translate(8%252525)'%253Binner.innerHTML%253D'3'%253B%257D%2520setTimeout(()%2520%253D%253E%2520inner.innerHTML%253D'2'%252C%2520200)%253BsetTimeout(()%2520%253D%253E%2520inner.innerHTML%253D'1'%252C%2520400)%253Bgtimeout%253DsetTimeout(()%2520%253D%253E%2520nextWord(term.split('%2520').reverse())%252C%2520600)%253B%257D)%253Blet%2520nextWord%253D(words)%2520%253D%253E%2520%257B%2520let%2520next%253Dwords.pop()%253Bif(next.length%2520%253C%25203%2520%2526%2526%2520words.length%2520%2526%2526%2520words%255Bwords.length%2520-%25201%255D.length%2520%253C%25206)%257B%2520next%2520%252B%253D%2520'%2520'%2520%252B%2520words.pop()%253B%257D%2520inner.innerHTML%253Dnext%253Blet%2520duration%253D(1000%2520%252F%2520(wpm%2520%252F%252060))%2520*%2520((next.length%2520%252F%25205%2520-%25201)%2520*%25200.5%2520%252B%25201)%253Blet%2520timeout%253DsetTimeout(()%2520%253D%253E%2520%257B%2520if(words.length)%257B%2520if(timeout%2520!%253D%253D%2520gtimeout)%257B%2520return%253B%257D%2520nextWord(words)%253B%257D%2520else%2520%257B%2520stop()%253B%257D%2520%257D%252C%2520duration)%253Bgtimeout%253Dtimeout%253B%257D%253Bstop%253D()%2520%253D%253E%2520%257B%2520clearTimeout(gtimeout)%253Bgtimeout%253D0%253Bif(outer)%257B%2520try%257B%2520Array.from(document.getElementsByTagName('body'))%255B0%255D.removeChild(outer)%253B%257D%2520catch(e)%257B%257D%2520outer%253Dinner%253Dundefined%253B%257D%2520%257D%253B%257D)()%253B][speedread (drag me into the bookmark bar)]]

[[file:speedread.js][Source]]
